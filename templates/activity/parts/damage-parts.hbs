<ul class="unlist">
    {{#each damageParts}}
    <li data-index="{{ @index }}">
        <div class="formula flexrow">
            {{#unless data.custom.enabled}}

            {{ formField fields.number name=(concat prefix "number") value=data.number }}
            {{ formField fields.denomination name=(concat prefix "denomination") value=data.denomination
               options=denominationOptions }}
            <span class="seperator">+</span>
            {{ formField fields.bonus name=(concat prefix "bonus") value=data.bonus }}
            <input type="hidden" name="{{ prefix }}custom.formula" value="{{ data.custom.formula }}">

            {{else}}

            {{ formField fields.custom.fields.formula name=(concat prefix "custom.formula")
               value=data.custom.formula }}
            <input type="hidden" name="{{ prefix }}number" value="{{ data.number }}">
            <input type="hidden" name="{{ prefix }}denomination" value="{{ data.denomination }}">
            <input type="hidden" name="{{ prefix }}bonus" value="{{ data.bonus }}">

            {{/unless}}
            {{ formField fields.custom.fields.enabled name=(concat prefix "custom.enabled")
               value=data.custom.enabled }}
        </div>
        {{ formField fields.types name=(concat prefix "types") value=data.types options=typeOptions }}

        {{#if canScale}}
        {{#with fields.scaling.fields as |fields|}}
        <div class="scaling flexrow">
            {{ formField fields.mode name=(concat ../prefix "scaling.mode") value=../data.scaling.mode
               options=../scalingOptions }}
            {{#if ../data.scaling.mode}}
            {{ formField fields.number name=(concat ../prefix "scaling.number") value=../data.scaling.number }}
            {{ formField fields.formula name=(concat ../prefix "scaling.formula") value=../data.scaling.formula }}
            {{/if}}
        </div>
        {{/with}}
        {{/if}}

        <button type="button" class="unbutton" data-action="deleteDamagePart">
            {{ localize "DND5E.DAMAGE.Part.Action.Delete" }}
        </button>
    </li>
    {{/each}}
</ul>

<button type="button" class="unbutton" data-action="addDamagePart">
    {{ localize "DND5E.DAMAGE.Part.Action.Create" }}
</button>
